define(["module"],function(module){"use strict";var e="undefined",t="replace",n="createXhr",r="indexOf",i=".",s="substring",o="length",u="strip",a="toLowerCase",f="isBuild",l="moduleName",c="finishLoad",h="asModule",p="append",d,v,m=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],g=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,y=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,b=typeof location!==e&&location.href,w=b&&location.protocol&&location.protocol[t](/\:/,""),E=b&&location.hostname,S=b&&(location.port||undefined),x=[],T=module.config&&module.config()||{};d={version:"2.0.3",strip:function(e){if(e){e=e[t](g,"");var n=e.match(y);n&&(e=n[1])}else e="";return e},jsEscape:function(e){return e[t](/(['\\])/g,"\\$1")[t](/[\f]/g,"\\f")[t](/[\b]/g,"\\b")[t](/[\n]/g,"\\n")[t](/[\t]/g,"\\t")[t](/[\r]/g,"\\r")[t](/[\u2028]/g,"\\u2028")[t](/[\u2029]/g,"\\u2029")},createXhr:T[n]||function(){var t,n,r;if(typeof XMLHttpRequest!==e)return new XMLHttpRequest;if(typeof ActiveXObject!==e)for(n=0;n<3;n+=1){r=m[n];try{t=new ActiveXObject(r)}catch(i){}if(t){m=[r];break}}return t},parseName:function(e){var t=!1,n=e[r](i),a=e[s](0,n),f=e[s](n+1,e[o]);return n=f[r]("!"),n!==-1&&(t=f[s](n+1,f[o]),t=t===u,f=f[s](0,n)),{moduleName:a,ext:f,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i,s,o,u=d.xdRegExp.exec(e);return u?(i=u[2],s=u[3],s=s.split(":"),o=s[1],s=s[0],(!i||i===t)&&(!s||s[a]()===n[a]())&&(!o&&!s||o===r)):!0},finishLoad:function(e,t,n,r){n=t?d[u](n):n,T[f]&&(x[e]=n),r(n)},load:function(e,t,n,r){if(r[f]&&!r.inlineText){n();return}T[f]=r[f];var s=d.parseName(e),o=s[l]+i+s.ext,a=t.toUrl(o),h=T.useXhr||d.useXhr;!b||h(a,w,E,S)?d.get(a,function(t){d[c](e,s[u],t,n)},function(e){n.error&&n.error(e)}):t([o],function(e){d[c](s[l]+i+s.ext,s[u],e,n)})},write:function(e,t,n,r){if(x.hasOwnProperty(t)){var i=d.jsEscape(x[t]);n[h](e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,t,n,r,s){var o=d.parseName(t),u=o[l]+i+o.ext,a=n.toUrl(o[l]+i+o.ext)+".js";d.load(u,n,function(t){var n=function(e){return r(a,e)};n[h]=function(e,t){return r[h](e,a,t)},d.write(e,u,n,s)},s)}};if(T.env==="node"||!T.env&&typeof process!==e&&process.versions&&!!process.versions.node)v=require.nodeRequire("fs"),d.get=function(e,t){var n=v.readFileSync(e,"utf8");n[r]("ï»¿")===0&&(n=n[s](1)),t(n)};else if(T.env==="xhr"||!T.env&&d[n]())d.get=function(e,t,r){var i=d[n]();i.open("GET",e,!0),T.onXhr&&T.onXhr(i,e),i.onreadystatechange=function(n){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):t(i.responseText))},i.send(null)};else if(T.env==="rhino"||!T.env&&typeof Packages!==e&&typeof java!==e)d.get=function(e,t){var n,r,i="utf-8",u=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),f=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(u),i)),l="";try{n=new java.lang.StringBuffer,r=f.readLine(),r&&r[o]()&&r.charAt(0)===65279&&(r=r[s](1)),n[p](r);while((r=f.readLine())!==null)n[p](a),n[p](r);l=String(n.toString())}finally{f.close()}t(l)};return d});